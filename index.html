<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Workspace Pro</title>
    
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self' https://*.firebaseio.com https://*.firebaseapp.com https://www.youtube.com;
        script-src 'self' 'unsafe-inline' 'unsafe-eval' https://www.gstatic.com https://apis.google.com https://*.firebasejs.com https://*.firebaseapp.com https://*.firebasedatabase.app;
        style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com;
        font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com;
        img-src 'self' data: https://www.gstatic.com https://lh3.googleusercontent.com https://i.ytimg.com;
        connect-src 'self' https://identitytoolkit.googleapis.com https://securetoken.googleapis.com https://*.firebaseio.com https://*.firebasedatabase.app wss://*.firebasedatabase.app https://www.gstatic.com;
        frame-src https://*.firebaseapp.com https://accounts.google.com https://*.firebasedatabase.app https://www.youtube.com;
    ">

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
     <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéì</text></svg>">
</head>
<body>

    <div id="loginOverlay" class="login-wrapper">
        <div class="background-shapes"></div>
        <div class="login-card fade-in-up">
            <div id="loginView">
                <div class="login-header">
                    <div class="icon-pulse">üëã</div>
                    <h1>Selamat Datang</h1>
                    <p>Masuk untuk melanjutkan</p>
                </div>
                <div class="login-form">
                    <div class="input-group" style="margin-bottom: 10px;">
                        <i class="fas fa-envelope"></i>
                        <input type="email" id="loginEmail" placeholder="Email">
                    </div>
                    <div class="input-group">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="loginPass" placeholder="Password">
                    </div>
                    <button onclick="handleLogin()" class="btn-primary glow btn-block" style="margin-top: 10px;">
                        Masuk <i class="fas fa-sign-in-alt"></i>
                    </button>
                    <div class="divider"><span>ATAU</span></div>
                    <button onclick="handleGoogleLogin()" class="btn-google">
                        <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="G">
                        Masuk dengan Google
                    </button>
                    <p id="authErrorMsg"></p>
                    <p class="auth-switch">Belum punya akun? <a onclick="switchAuthMode('register')">Daftar Sekarang</a></p>
                </div>
            </div>

            <div id="registerView" style="display: none;">
                <div class="login-header">
                    <div class="icon-pulse">üöÄ</div>
                    <h1>Buat Akun</h1>
                    <p>Bergabunglah bersama kami</p>
                </div>
                <div class="login-form">
                    <div class="input-group" style="margin-bottom: 10px;">
                        <i class="fas fa-user"></i>
                        <input type="text" id="regUsername" placeholder="Nama Panggilan Kamu">
                    </div>
                    <div class="input-group" style="margin-bottom: 10px;">
                        <i class="fas fa-envelope"></i>
                        <input type="email" id="regEmail" placeholder="Email Aktif">
                    </div>
                    <div class="input-group">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="regPass" placeholder="Password (Min. 6 Karakter)">
                    </div>
                    <button onclick="handleRegister()" class="btn-primary glow btn-block" style="margin-top: 20px;">Daftar Akun</button>
                    <p class="auth-switch">Sudah punya akun? <a onclick="switchAuthMode('login')">Login di sini</a></p>
                </div>
            </div>
        </div>
    </div>

    <div class="main-container" id="mainContent" style="display: none;">
        
        <header class="glass-panel fade-in">
            <div class="header-left">
                <h1 id="greeting">Halo, User! üëã</h1>
                <div class="xp-container">
                    <div class="level-badge">Lvl <span id="userLevel">1</span></div>
                    <div class="xp-bar-bg">
                        <div class="xp-bar-fill" id="xpBarFill" style="width: 0%;"></div>
                    </div>
                    <small id="xpText" style="color:var(--text-sub); font-size:0.7rem; font-weight:600;">0 / 100 XP</small>
                </div>
                <p id="headerDate" style="margin-bottom: 0; font-size: 0.85rem; color: var(--text-sub);"></p>
            </div>
            
            <div class="header-center">
                <div class="live-clock">
                    <span id="clockTime">00:00</span>
                </div>
            </div>

            <div class="header-right">
                <div class="streak-badge" title="Login Harian Berturut-turut">
                    <i class="fas fa-fire"></i> <span id="streakCount">0</span> Hari
                </div>

                <button class="icon-btn" onclick="toggleDarkMode()" title="Ganti Tema">
                    <i class="fas fa-moon" id="themeIcon"></i>
                </button>
                <div class="profile-menu">
                    <span id="backupReminder" class="backup-badge"></span> 
                    <button class="profile-btn" onclick="toggleSettings()">
                        <div class="avatar-ring"><i class="fas fa-user"></i></div>
                        <span class="profile-name">Akun</span>
                    </button>
                    <div class="dropdown-menu" id="settingsDropdown">
                        <div class="dropdown-header">
                            <span id="displayUsername">User</span>
                            <small id="loginStatusText">Online</small>
                        </div>
                        <div class="dropdown-divider"></div>
                        <button onclick="editUsername()"><i class="fas fa-user-edit"></i> Ganti Nama</button>
                        <button onclick="toggleExamMode()"><i class="fas fa-graduation-cap"></i> Mode Ujian</button>
                        <button onclick="showSoundSettings()"><i class="fas fa-volume-up"></i> Pengaturan Suara</button>
                        <div class="dropdown-divider"></div>
                        <button onclick="exportData()"><i class="fas fa-download"></i> Backup Data</button>
                        <button onclick="document.getElementById('importFile').click()"><i class="fas fa-upload"></i> Restore Data</button>
                        <input type="file" id="importFile" hidden onchange="importData(this)">
                        <div class="dropdown-divider"></div>
                        <button onclick="logoutUser()"><i class="fas fa-sign-out-alt"></i> Keluar</button>
                        <button onclick="openClearDataModal()" class="text-danger"><i class="fas fa-trash-alt"></i> Hapus Data</button>
                    </div>
                </div>
            </div>
        </header>

        <div class="quote-banner fade-in-up">
            <div class="quote-content">
                <div class="quote-badge">‚ú® KATA-KATA HARI INI ‚ú®</div>
                <p id="motivationQuote" class="new-quote-text">"Memuat motivasi..."</p>
            </div>
        </div>
        <div class="dashboard-grid fade-in-up">
            
            <div class="left-column">
                
                <div class="card schedule-section">
                    <div class="card-header">
                        <div class="title-with-icon">
                            <div class="icon-box purple"><i class="fas fa-book-open"></i></div>
                            <h2>Jadwal Belajar</h2>
                        </div>
                        <div class="controls">
                            <select id="weekTypeSelector" onchange="changeWeekType()">
                                <option value="auto">Auto (Minggu Bergantian)</option>
                                <option value="umum">Minggu Umum (Paksa)</option>
                                <option value="produktif">Minggu Produktif (Paksa)</option>
                            </select>
                            <div class="nav-pills">
                                <button onclick="changeDay(-1)"><i class="fas fa-chevron-left"></i></button>
                                <span id="activeDayName">SENIN</span>
                                <button onclick="changeDay(1)"><i class="fas fa-chevron-right"></i></button>
                            </div>
                        </div>
                    </div>

                    <div class="filter-controls-advanced">
                        <select id="scheduleFilterCategory" onchange="renderSchedule()">
                            <option value="all">Filter Kategori (Semua)</option>
                            <option value="umum">Umum</option>
                            <option value="produktif">Produktif</option>
                            <option value="kokurikuler">Kokurikuler</option>
                        </select>
                        <select id="scheduleFilterGuru" onchange="renderSchedule()">
                            <option value="all">Filter Guru/Dosen (Semua)</option>
                        </select>
                    </div>
                    <div class="schedule-status-bar">
                        <span class="status-dot"></span>
                        <span id="currentStatus">Memuat status...</span>
                    </div>

                    <div class="table-wrapper">
                        <table>
                            <thead>
                                <tr>
                                    <th width="35%">Mata Pelajaran</th>
                                    <th width="25%">Waktu</th>
                                    <th width="30%">Catatan</th>
                                    <th width="10%">Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="scheduleBody"></tbody>
                        </table>
                        <div id="holidayMessage" class="empty-state" style="display: none;">
                            <div class="empty-icon">‚òï</div>
                            <h3>Hari Libur!</h3>
                            <p>Waktunya istirahat atau kembangkan skillmu.</p>
                        </div>
                    </div>

                    <div style="margin-top: 15px;">
                        <button onclick="openAddScheduleModal()" class="btn-primary" style="width: 100%; display: flex; align-items: center; justify-content: center; gap: 10px;">
                            <i class="fas fa-plus-circle"></i> Tambah Jadwal Baru
                        </button>
                    </div>

                </div>

                <div class="card urgent-card" style="margin-top: 20px;">
                    <div class="card-header">
                        <div class="title-with-icon">
                            <div class="icon-box red"><i class="fas fa-exclamation-triangle"></i></div>
                            <h2>Deadline Mendesak (< 3 Hari)</h2>
                        </div>
                    </div>
                    <ul id="urgentList" class="urgent-list"></ul>
                </div>
                
                <div class="card pomodoro-card" style="margin-top: 20px;">
                    <div class="card-header">
                        <div class="title-with-icon">
                            <div class="icon-box red"><i class="fas fa-clock"></i></div>
                            <h2>Fokus Mode (Pomodoro)</h2>
                        </div>
                        <span class="mode-label" id="timerMode">FOKUS</span>
                    </div>

                    <div id="focusModeLockText" style="display:none; text-align:center; margin-bottom: 10px; font-weight: 600; color: #ffeb3b; background: rgba(0,0,0,0.3); padding: 8px; border-radius: 8px;">
                        ‚ö†Ô∏è JANGAN GANTI TAB! Timer akan dijeda otomatis.
                    </div>

                    <div class="timer-display">
                        <h1 id="timerDisplay">25:00</h1>
                        <p id="timerMessage">Waktunya Bekerja Keras</p>
                    </div>
                    
                    <div class="form-group" style="margin-bottom: 20px;">
                         <select id="pomodoroTaskSelector" class="sub-input">
                            <option value="">-- Pilih Tugas untuk Fokus --</option>
                         </select>
                    </div>

                    <div class="timer-controls">
                        <button class="btn-primary" id="startPauseBtn" onclick="startTimer()">Mulai</button>
                        <button class="btn-text-danger" onclick="resetTimer()"><i class="fas fa-redo"></i> Reset</button>
                    </div>
                </div>

                <div class="card focus-stats-card" style="margin-top: 20px;">
                    <div class="card-header">
                        <div class="title-with-icon">
                            <div class="icon-box purple"><i class="fas fa-chart-bar"></i></div>
                            <h2>Analisis Fokus (7 Hari Terakhir)</h2>
                        </div>
                    </div>
                    <div class="chart-section">
                        <div id="focusChartContainer" class="expense-chart-container">
                            <p class="empty-message small">Belum ada data fokus.</p>
                        </div>
                    </div>
                </div>

            </div>

            <div class="sidebar-column">
                
                <div class="card music-card">
                    <div class="card-header" style="margin-bottom:10px;">
                         <div class="title-with-icon">
                            <div class="icon-box blue"><i class="fas fa-music"></i></div>
                            <h2>LoFi Radio</h2>
                        </div>
                    </div>
                    <div class="music-player-wrapper">
                        <iframe style="border-radius:12px" src="https://www.youtube.com/embed/jfKfPfyJRdk?si=LoFiGirl&controls=0&start=0" title="LoFi Player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen width="100%" height="200"></iframe>
                        <p style="font-size:0.8rem; text-align:center; margin-top:5px; color:var(--text-sub);">Dengerin biar rileks üéß</p>
                    </div>
                </div>

                <div class="card todo-card">
                    <div class="card-header">
                        <div class="title-with-icon">
                            <div class="icon-box blue"><i class="fas fa-check-circle"></i></div>
                            <h2>Tugas</h2>
                        </div>
                        <div class="progress-circle" id="taskProgressCircle">
                            <span id="taskProgressText">0%</span>
                            <svg viewBox="0 0 36 36">
                                <path class="circle-bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
                                <path class="circle" id="taskProgressPath" stroke-dasharray="0, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
                            </svg>
                        </div>
                    </div>

                    <div class="filter-tabs">
                        <button class="tab active" onclick="filterTasks('all', this)">Semua</button>
                        <button class="tab" onclick="filterTasks('pending', this)">Belum</button>
                        <button class="tab" onclick="filterTasks('completed', this)">Selesai</button>
                        <button class="tab btn-clear" onclick="clearCompletedTasks()" title="Hapus semua yang selesai">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                    </div>

                    <div class="search-input">
                        <i class="fas fa-search"></i>
                        <input type="text" id="searchTaskInput" placeholder="Cari tugas..." onkeyup="loadTasks()">
                    </div>

                    <div class="add-task-form">
                        <input type="text" id="taskInput" class="main-input" placeholder="Tugas baru...">
                        <div class="form-row">
                            <input type="date" id="taskDate" class="sub-input">
                            <select id="taskPriority" class="sub-input">
                                <option value="Low">Prioritas Rendah (santai)</option>
                                <option value="Medium" selected>Prioritas Sedang (cukup penting)</option>
                                <option value="High">Prioritas Tinggi (sangat penting)</option>
                            </select>
                        </div>
                        <button id="addTaskBtn" class="btn-block btn-primary" onclick="handleTaskButton()">Tambah Tugas</button>
                    </div>
                    
                    <small style="display:block; text-align:center; color:var(--text-sub); font-size:0.7rem; margin-bottom:5px;">üí° Tips: Tahan & geser untuk atur urutan tugas.</small>
                    <ul id="taskList" class="task-list"></ul>
                </div>

                <div class="card finance-card" id="financeCard">
                    <div class="card-header">
                        <div class="title-with-icon">
                            <div class="icon-box green"><i class="fas fa-wallet"></i></div>
                            <h2>Keuangan</h2>
                        </div>
                        <div class="balance-display">
                            <small>Total Aset</small>
                            <h3 id="totalBalance">Rp 0</h3>
                        </div>
                    </div>

                    <div class="target-widget" onclick="editTarget()">
                        <div class="target-header">
                            <span id="targetName">üéØ Set Target</span>
                            <span id="targetAmount">Rp 0</span>
                        </div>
                        <div class="progress-bar-bg"><div id="targetProgressBar" class="progress-bar-fill"></div></div>
                        <small id="targetPercentage">0% tercapai</small>
                    </div>

                    <div class="chart-section">
                        <h4>Distribusi Pengeluaran</h4>
                        <div id="expenseChartContainer" class="expense-chart-container"></div>
                    </div>
                    
                    <div class="wallet-label">Pilih Sumber Dana:</div>
                    <div class="wallet-grid">
                        <div class="wallet-card dana" onclick="selectWallet('dana', this)">
                            <div class="card-top">
                                <span>DANA</span>
                                <i class="fas fa-check-circle check-icon"></i>
                            </div>
                            <div class="card-bottom">
                                <b id="saldo-dana">Rp 0</b>
                            </div>
                            <i class="bg-icon fas fa-wallet"></i>
                        </div>

                        <div class="wallet-card ovo" onclick="selectWallet('ovo', this)">
                            <div class="card-top">
                                <span>OVO</span>
                                <i class="fas fa-check-circle check-icon"></i>
                            </div>
                            <div class="card-bottom">
                                <b id="saldo-ovo">Rp 0</b>
                            </div>
                            <i class="bg-icon fas fa-mobile-alt"></i>
                        </div>

                        <div class="wallet-card gopay" onclick="selectWallet('gopay', this)">
                            <div class="card-top">
                                <span>GOPAY</span>
                                <i class="fas fa-check-circle check-icon"></i>
                            </div>
                            <div class="card-bottom">
                                <b id="saldo-gopay">Rp 0</b>
                            </div>
                            <i class="bg-icon fas fa-motorcycle"></i>
                        </div>

                        <div class="wallet-card cash active" onclick="selectWallet('cash', this)">
                            <div class="card-top">
                                <span>TUNAI</span>
                                <i class="fas fa-check-circle check-icon"></i>
                            </div>
                            <div class="card-bottom">
                                <b id="saldo-cash">Rp 0</b>
                            </div>
                            <i class="bg-icon fas fa-money-bill-wave"></i>
                        </div>
                    </div>
                    <input type="hidden" id="selectedWallet" value="cash">

                    <div class="transaction-box">
                        <input type="text" id="moneyDesc" placeholder="Keterangan (Cth: Jajan)">
                        <div class="form-row">
                            <input type="number" id="moneyAmount" placeholder="Rp...">
                            <select id="txnCategory">
                                <option value="Jajan">üçî Jajan</option>
                                <option value="Transport">üöó Transport</option>
                                <option value="Tabungan">üí∞ Tabungan</option>
                                <option value="Belanja">üõçÔ∏è Belanja</option>
                                <option value="Lainnya">‚ú® Lainnya</option>
                            </select>
                        </div>
                        <div class="btn-group">
                            <button class="btn-in" onclick="addTransaction('in')"><i class="fas fa-arrow-down"></i> Masuk</button>
                            <button class="btn-out" onclick="addTransaction('out')"><i class="fas fa-arrow-up"></i> Keluar</button>
                        </div>
                    </div>

                    <div class="history-section">
                        <div class="history-header">
                            <h4>Riwayat</h4>
                            <select id="historyFilter" onchange="loadTransactions()">
                                <option value="all">Semua</option>
                                <option value="in">Masuk</option>
                                <option value="out">Keluar</option>
                            </select>
                            <button class="btn-mini" onclick="exportFinanceReport()" title="Download"><i class="fas fa-download"></i></button>
                        </div>
                        <ul id="transactionList" class="history-list"></ul>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div id="toastBox"></div>
    <div id="soundModal" class="modal-backdrop" style="display: none;">
        <div class="modal-content fade-in-up" style="max-width: 350px;">
            <div class="modal-head">
                <h3>üîä Suara Notifikasi</h3>
                <button class="close-icon" onclick="document.getElementById('soundModal').style.display='none'">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Pilih Suara Pomodoro Selesai</label>
                    <select id="pomodoroSoundSelect">
                        <option value="bell">Bel Sekolah (Default)</option>
                        <option value="ding">Ding Jernih</option>
                        <option value="classic">Nada Klasik Retro</option>
                        <option value="silent">Hening</option>
                    </select>
                </div>
            </div>
            <div class="modal-foot">
                 <button onclick="saveSoundSettings()" class="btn-primary">Simpan</button>
            </div>
        </div>
    </div>
    <div id="usernameModal" class="modal-backdrop" style="display: none;">
        <div class="modal-content fade-in-up" style="max-width: 350px;">
            <div class="modal-head">
                <h3>üë§ Ganti Nama</h3>
                <button class="close-icon" onclick="document.getElementById('usernameModal').style.display='none'">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Nama Baru</label>
                    <input type="text" id="newUsernameInput" placeholder="Nama panggilan...">
                </div>
            </div>
            <div class="modal-foot">
                 <button onclick="saveUsername()" class="btn-primary">Simpan</button>
            </div>
        </div>
    </div>
    <div id="clearDataModal" class="modal-backdrop" style="display: none;">
        <div class="modal-content fade-in-up" style="max-width: 400px;">
            <div class="modal-head">
                <h3 class="text-danger">‚ö†Ô∏è Hapus Semua Data</h3>
                <button class="close-icon" onclick="document.getElementById('clearDataModal').style.display='none'">√ó</button>
            </div>
            <div class="modal-body">
                <p style="color:var(--red); margin-bottom: 15px;">Tindakan ini permanen. Semua Tugas, Jadwal, Keuangan, dan Pengaturan Anda akan hilang dari browser ini.</p>
                <div class="form-group">
                    <label>Ketik kata **HAPUS** untuk melanjutkan:</label>
                    <input type="text" id="clearDataConfirmationInput" placeholder="Ketik HAPUS">
                </div>
            </div>
            <div class="modal-foot">
                <button onclick="confirmClearUserData()" class="btn-primary" style="background:var(--red);">Konfirmasi Hapus</button>
            </div>
        </div>
    </div>
    
    <div id="noteModal" class="modal-backdrop" style="display: none;">
        <div class="modal-content fade-in-up">
            <div class="modal-head">
                <h3 id="noteModalTitle">üìù Catatan Mapel</h3>
                <button class="close-icon" onclick="closeNoteModal()">√ó</button>
            </div>
            <div class="modal-body">
                <p id="noteModalSubtitle" style="font-size:0.85rem; color:var(--text-sub); margin-bottom:10px;">Tulis PR atau catatan penting di sini.</p>
                <textarea id="noteModalInput" placeholder="Contoh: PR Halaman 52 dikumpulkan besok..."></textarea>
                <input type="hidden" id="noteTargetDay">
                <input type="hidden" id="noteTargetIndex">
            </div>
            <div class="modal-foot">
                <button onclick="deleteNote()" class="btn-text-danger">Hapus</button>
                <button onclick="saveSubjectNote()" class="btn-primary">Simpan Catatan</button>
            </div>
        </div>
    </div>

  <div id="scheduleEditModal" class="modal-backdrop" style="display: none;">
        <div class="modal-content fade-in-up">
            <div class="modal-head">
                <h3>‚úèÔ∏è Edit Jadwal</h3>
                <button class="close-icon" onclick="closeScheduleEditModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Mata Pelajaran</label>
                    <input type="text" id="editMapelName">
                </div>
                <div class="form-group">
                    <label>Waktu</label>
                    <input type="text" id="editMapelTime" placeholder="08.00 - 09.20">
                </div>
                <div class="form-group">
                    <label>Kategori</label>
                    <select id="editMapelType">
                        <option value="umum">Umum (Hijau)</option>
                        <option value="produktif">Produktif (Oranye)</option>
                        <option value="kokurikuler">Kokurikuler (Biru)</option>
                    </select>
                </div>
            </div>
            <div class="modal-foot" style="justify-content: space-between;">
                <button onclick="deleteSchedule()" class="btn-text-danger"><i class="fas fa-trash"></i> Hapus</button>
                <button onclick="saveScheduleChanges()" class="btn-primary">Simpan Perubahan</button>
            </div>
        </div>
    </div>
    <div id="addScheduleModal" class="modal-backdrop" style="display: none;">
        <div class="modal-content fade-in-up">
            <div class="modal-head">
                <h3>‚ûï Tambah Jadwal</h3>
                <button class="close-icon" onclick="document.getElementById('addScheduleModal').style.display='none'">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Pilih Minggu</label>
                    <select id="addScheduleWeekType">
                        <option value="umum">Minggu Umum</option>
                        <option value="produktif">Minggu Produktif</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Pilih Hari</label>
                    <select id="addScheduleDay">
                        <option value="Senin">Senin</option>
                        <option value="Selasa">Selasa</option>
                        <option value="Rabu">Rabu</option>
                        <option value="Kamis">Kamis</option>
                        <option value="Jumat">Jumat</option>
                        <option value="Sabtu">Sabtu</option>
                        <option value="Minggu">Minggu</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Mata Pelajaran</label>
                    <input type="text" id="addScheduleMapel" placeholder="Contoh: Matematika">
                </div>
                <div class="form-group">
                    <label>Nama Guru</label>
                    <input type="text" id="addScheduleGuru" placeholder="Contoh: Bpk. Budi">
                </div>
                <div class="form-group">
                    <label>Waktu</label>
                    <input type="text" id="addScheduleTime" placeholder="Contoh: 08.00 - 09.20">
                </div>
                <div class="form-group">
                    <label>Kategori (Warna)</label>
                    <select id="addScheduleType">
                        <option value="umum">Umum (Hijau)</option>
                        <option value="produktif">Produktif (Oranye)</option>
                        <option value="kokurikuler">Kokurikuler (Biru)</option>
                    </select>
                </div>
            </div>
            <div class="modal-foot">
                <button onclick="saveNewSchedule()" class="btn-primary btn-block">Tambah Jadwal</button>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, set, onValue, remove } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, onAuthStateChanged, updateProfile, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBNfmxs3iOYOlWdscHj6SX0DP5xxmTCfyU",
            authDomain: "full-code-e7288.firebaseapp.com",
            databaseURL: "https://full-code-e7288-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "full-code-e7288",
            storageBucket: "full-code-e7288.firebasestorage.app",
            messagingSenderId: "915799491478",
            appId: "1:915799491478:web:7401bc680ffc4a888653b7"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const auth = getAuth(app);
        const googleProvider = new GoogleAuthProvider();

        window.db = db; 
        window.dbRef = ref; 
        window.dbSet = set; 
        window.dbOnValue = onValue; 
        window.dbRemove = remove;
        
        window.auth = auth;
        window.googleProvider = googleProvider;
        window.authSignIn = signInWithEmailAndPassword;
        window.authSignUp = createUserWithEmailAndPassword;
        window.authSignOut = signOut;
        window.authListener = onAuthStateChanged;
        window.authUpdateProfile = updateProfile;
        window.authSignInGoogle = signInWithPopup;

        console.log("Sistem Login & Database Siap!");
    </script>
    
    <script src="script.js" defer></script>

</body>
</html>